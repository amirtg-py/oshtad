# دستورالعمل‌های راه‌اندازی پروژه

این مخزن شامل دو بخش **backend** (FastAPI) و **frontend** (React) است.

## راه‌اندازی خودکار (توصیه شده)

برای راه‌اندازی سریع و خودکار برنامه، می‌توانید از یکی از اسکریپت‌های زیر استفاده کنید:

### راه‌اندازی برنامه:

#### در ویندوز:
1. روی فایل `start_app.bat` دابل کلیک کنید.
   - یا از طریق خط فرمان: `start_app.bat`

#### در PowerShell:
1. روی فایل `start_app.ps1` راست کلیک کرده و گزینه "Run with PowerShell" را انتخاب کنید.
   - یا از طریق PowerShell: `./start_app.ps1`

این اسکریپت‌ها به صورت خودکار مراحل زیر را انجام می‌دهند:
- ایجاد و فعال‌سازی محیط مجازی پایتون
- نصب وابستگی‌های بک‌اند
- راه‌اندازی سرور بک‌اند
- نصب وابستگی‌های فرانت‌اند
- راه‌اندازی سرور فرانت‌اند
- باز کردن برنامه در مرورگر

### توقف برنامه:

#### در ویندوز:
1. روی فایل `stop_app.bat` دابل کلیک کنید.
   - یا از طریق خط فرمان: `stop_app.bat`

#### در PowerShell:
1. روی فایل `stop_app.ps1` راست کلیک کرده و گزینه "Run with PowerShell" را انتخاب کنید.
   - یا از طریق PowerShell: `./stop_app.ps1`

### راهنمای تفصیلی
برای اطلاعات بیشتر و رفع مشکلات احتمالی، به فایل `LAUNCHER_GUIDE.md` مراجعه کنید.

## پیش‌نیازها
- **Python 3.9+**
- **Node.js** (نسخه 18 یا بالاتر)
- **npm** برای مدیریت بسته‌های جاوااسکریپت
- **MongoDB** (مستقیم یا Docker)؛ اگر متغیر محیطی `MONGO_URL` تنظیم نشود، به `mongodb://localhost:27017/medical_store` متصل می‌شود.

## راه‌اندازی Backend
1. به دایرکتوری ریشه پروژه بروید:
   ```
   cd d:\work_station\oshtad\new\site-main
   ```
2. محیط مجازی پایتون را ایجاد و فعال کنید (اختیاری اما توصیه شده):
   ```
   python -m venv venv
   venv\Scripts\activate   # در PowerShell
   ```
3. وابستگی‌های پایتون را نصب کنید:
   ```
   pip install -r backend\requirements.txt
   ```
4. اطمینان حاصل کنید که MongoDB در حال اجرا است یا متغیر `MONGO_URL` را تنظیم کنید.
5. سرویس FastAPI را با uvicorn راه‌اندازی کنید:
   ```
   uvicorn backend.server:app --reload
   ```
   برنامه در آدرس `http://127.0.0.1:8000` در دسترس خواهد بود.

## راه‌اندازی Frontend
1. به پوشه `frontend` بروید:
   ```
   cd frontend
   ```
2. بسته‌های npm/yarn را نصب کنید:
   ```
   yarn install   # یا npm install
   ```
3. سرور توسعه را اجرا کنید:
   ```
   yarn start   # یا npm run start
   ```
   برنامه در مرورگر پیش‌فرض شما بر روی `http://localhost:3000` باز می‌شود.

## نکات تکمیلی
- برای تست API می‌توانید از ابزارهایی مثل **Postman** یا **curl** استفاده کنید.
- اگر می‌خواهید تست‌های یکپارچه‌سازی را اجرا کنید، در پوشه `backend` می‌توانید دستور زیر را اجرا کنید:
   ```
   pytest
   ```
- برای ساخت نسخهٔ production از frontend:
   ```
   yarn build   # یا npm run build
   ```
   خروجی در پوشه `build` قرار می‌گیرد که می‌توانید آن را روی سرورهای استاتیک میزبانی کنید.

با این دستورالعمل‌ها می‌توانید پروژه را به‌صورت کامل راه‌اندازی کنید.